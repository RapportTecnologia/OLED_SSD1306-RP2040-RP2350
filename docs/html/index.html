<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RP2040 OLED SSD1306: Bazel build</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RP2040 OLED SSD1306
   </div>
   <div id="projectbrief">Driver/Exemplos para display OLED SSD1306 no RP2040</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Localizar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Carregando...</div>
<div class="SRStatus" id="Searching">Procurando...</div>
<div class="SRStatus" id="NoMatches">Nenhuma entrada encontrada</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Bazel build </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_build_2__deps_2pico__sdk-src_2bazel_2README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Using the Pico SDK in a Bazel project.</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Add pico-sdk as a dependency</h2>
<p>First, in your <code>MODULE.bazel</code> file, add a dependency on the Pico SDK and <code>rules_cc</code>: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="pico__divider__nesting__test_8c.html#a0b4d1ad82ace098e820dde96e7e393e2">bazel_dep</a>(name = <span class="stringliteral">&quot;pico-sdk&quot;</span>, version = <span class="stringliteral">&quot;2.1.0&quot;</span>)</div>
<div class="ttc" id="apico__divider__nesting__test_8c_html_a0b4d1ad82ace098e820dde96e7e393e2"><div class="ttname"><a href="pico__divider__nesting__test_8c.html#a0b4d1ad82ace098e820dde96e7e393e2">count</a></div><div class="ttdeci">volatile uint32_t count[3]</div><div class="ttdef"><b>Definição</b> pico_divider_nesting_test.c:16</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
Register toolchains</h2>
<p>These toolchains tell Bazel how to compile for ARM cores. Add the following to the <code>MODULE.bazel</code> for your project: </p><div class="fragment"><div class="line"><a class="code hl_variable" href="pico__divider__nesting__test_8c.html#a0b4d1ad82ace098e820dde96e7e393e2">register_toolchains</a>(</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:linux-x86_64-rp2040&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:linux-x86_64-rp2350&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:win-x86_64-rp2040&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:win-x86_64-rp2350&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:mac-x86_64-rp2040&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:mac-x86_64-rp2350&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:mac-aarch64-rp2040&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;@pico-sdk//bazel/toolchain:mac-aarch64-rp2350&quot;</span>,</div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Ready to build!</h2>
<p>You're now ready to start building Pico Projects in Bazel! When building, don't forget to specify <code>--platforms</code> so Bazel knows you're targeting the Raspberry Pi Pico: </p><div class="fragment"><div class="line">$ bazelisk build --platforms=@pico-sdk//bazel/platform:rp2040 //...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5"></a>
SDK configuration</h1>
<p>An exhaustive list of build system configuration options is available in <code>//bazel/config:BUILD.bazel</code>.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Selecting a different board</h2>
<p>A different board can be selected specifying <code>--@pico-sdk//bazel/config:PICO_BOARD</code>: </p><div class="fragment"><div class="line">$ bazelisk build --platforms=//bazel/platform:rp2040 --@pico-sdk//bazel/config:PICO_BOARD=pico_w //...</div>
</div><!-- fragment --><p>If you have a bespoke board definition, you can configure the Pico SDK to use it by pointing <code>--@pico-sdk//bazel/config:PICO_CONFIG_HEADER</code> to a <code>cc_library</code> that defines <code>PICO_BOARD</code> and either a <code>PICO_CONFIG_HEADER</code> define or a <code>pico/config_autogen.h</code> header. Make sure any required <code>includes</code>, <code>hdrs</code>, and <code>deps</code> are also provided.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Generating UF2 firmware images</h1>
<p>Creation of UF2 images can be done as explicit build steps on a per-binary rule basis, or through an aspect. Running a wildcard build with the <code>pico_uf2_aspect</code> enabled is the easiest way to create a UF2 for every ELF firmware image.</p>
<div class="fragment"><div class="line">$ bazelisk build --platforms=@pico-sdk//bazel/platform:rp2040 \</div>
<div class="line">    --aspects @pico-sdk//tools:uf2_aspect.bzl%pico_uf2_aspect \</div>
<div class="line">    --output_groups=+pico_uf2_files \</div>
<div class="line">    //...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Building the Pico SDK itself</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
First time setup</h2>
<p>You'll need Bazel (v7.0.0 or higher) or Bazelisk (a self-updating Bazel launcher) to build the Pico SDK.</p>
<p>We strongly recommend you set up <a href="https://bazel.build/install/bazelisk">Bazelisk</a>.</p>
<p>You will also need a working compiler configured if you wish to build Picotool or pioasm.</p>
<ul>
<li>Linux: <code>sudo apt-get install build-essential</code> or similar.</li>
<li>macOS: <code>xcode-select --install</code></li>
<li>Windows: <a href="https://visualstudio.microsoft.com/vs/features/cplusplus/">Install MSVC</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
Building</h2>
<p>To build all of the Pico SDK, run the following command: </p><div class="fragment"><div class="line">$ bazelisk build --platforms=//bazel/platform:rp2040 //...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11"></a>
Known issues and limitations</h1>
<p>The Bazel build for the Pico SDK is relatively new, but most features and configuration options available in the CMake build are also available in Bazel. You are welcome and encouraged to file issues for any problems and limitations you encounter along the way.</p>
<p>Currently, the following features are not supported:</p>
<ul>
<li>Pico W wireless libraries work, but may not have complete feature parity with the CMake build.</li>
<li>Bazel does not yet provide RISC-V support for Pico 2/RP2350.</li>
<li>The pioasm parser cannot be built from source via Bazel.</li>
<li>Windows MSVC wildcard build (<code>bazel build //...</code>) does not work when targeting host.</li>
</ul>
<h1><a class="anchor" id="autotoc_md12"></a>
Contributing</h1>
<p>When making changes to the Bazel build, please run the Bazel validation script to ensure all supported configurations build properly:</p>
<div class="fragment"><div class="line">$ ./tools/run_all_bazel_checks.py</div>
</div><!-- fragment --><p>If you need to check against a local version of Picotool, you can run the script with <code>--picotool-dir</code>:</p>
<div class="fragment"><div class="line">$ ./tools/run_all_bazel_checks.py --picotool-dir=/path/to/picotool</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Gerado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
